@using ShopWeb.Areas.Admin.Controllers
@model IEnumerable<UserViewModel>

@{
    ViewData["Title"] = "Manage Users";
}

@section Styles {
    <link rel="stylesheet" href="~/css/admin-tables.css" />
}

<div class="admin-page-header">
    <div>
        <h1 class="admin-page-title">Users Management</h1>
        <p class="admin-page-subtitle">Manage all registered users and their roles</p>
    </div>
</div>

@if (Model.Any())
{
    <div class="admin-table-container">
        <div class="admin-table-wrapper">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th><i class="fas fa-user"></i> User ID</th>
                        <th><i class="fas fa-envelope"></i> Email</th>
                        <th><i class="fas fa-id-card"></i> Full Name</th>
                        <th><i class="fas fa-map-marker-alt"></i> Address</th>
                        <th><i class="fas fa-user-tag"></i> Roles</th>
                        <th><i class="fas fa-cogs"></i> Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in Model)
                    {
                        <tr>
                            <td><strong>#@user.Id.Substring(0, 8)</strong></td>
                            <td>
                                <div class="admin-user-info">
                                    <span class="admin-user-email">@user.Email</span>
                                </div>
                            </td>
                            <td><strong>@user.FullName</strong></td>
                            <td>
                                @if (!string.IsNullOrEmpty(user.Address))
                                {
                                    <small style="color: #a0a0a0;">@user.Address</small>
                                }
                                else
                                {
                                    <span style="color: #606060;">Not provided</span>
                                }
                            </td>
                            <td>
                                @foreach (var role in user.Roles)
                                {
                                    @if (role == "Admin")
                                    {
                                        <span class="admin-badge admin-badge-alert"><i class="fas fa-shield-alt"></i> @role</span>
                                    }
                                    else
                                    {
                                        <span class="admin-badge admin-badge-role"><i class="fas fa-user"></i> @role</span>
                                    }
                                }
                            </td>
                            <td>
                                <div class="admin-actions">
                                    <a asp-action="Edit" asp-route-id="@user.Id" class="admin-btn admin-btn-sm admin-btn-warning">
                                        <i class="fas fa-user-edit"></i>
                                        Edit
                                    </a>
                                    <form asp-action="Delete" asp-route-id="@user.Id" method="post" class="admin-delete-form" onsubmit="return confirm('Are you sure you want to delete this user? This action cannot be undone.');">
                                        @Html.AntiForgeryToken()
                                        <button type="submit" class="admin-btn admin-btn-sm admin-btn-danger">
                                            <i class="fas fa-user-times"></i>
                                            Delete
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}
else
{
    <div class="admin-empty-state">
        <i class="fas fa-users-slash"></i>
        <p>No users found in the system.</p>
    </div>
}
